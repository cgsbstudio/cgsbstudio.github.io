<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="theme-color" content="#F0F0E5">
      <meta property="description" content="3D Content Solutions">
      
      <meta property="og:title" content="CGSB">
      <meta property="og:description" content="3D Content Solutions">
      <meta property="og:image" content="img/og-thumb.jpg">
      <meta property="og:url" content="https://cgsb.studio">
      <meta property="og:type" content="website">

      <link rel="icon" type="image/png" href="favicon/favicon-96x96.png" sizes="96x96" />
      <link rel="icon" type="image/svg+xml" href="favicon/favicon.svg" />
      <link rel="shortcut icon" href="favicon/favicon.ico" />
      <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png" />
      <link rel="manifest" href="favicon/site.webmanifest" />
      
      <title>CGSB - Home</title>

      <link rel="stylesheet" href="styles/styles.css">

      <style>
        section {
          padding: 80px 0;
        }

        #hero-player, #section1 {
          max-width: 1360px;
          margin: 0 auto;
          padding-left: 80px;
          padding-right: 80px;
        }

        main {
          width: 100%;
          padding: 0;
        }

        #hero-player {
          padding-bottom: 60px;
        }

        #hero-player:hover {
          cursor: pointer;
        }

        #hero-player p {
          text-align: right;
          font-size: 1.2em;
          padding-top: 10px;
        }

        #section1 {
          padding-top: 0px;
          padding-bottom: 140px;
          display: flex;
        }

        #section1 li {
          list-style: none;
          font-size: 1.3em;
        }

        #section1 h1 {
          font-size: 1.9em;
          font-weight: normal;
          max-width: 650px;
          margin-bottom: 20px;
        }

        #section1_copy {
          width: 70%;
          padding-right: 10px;
        }

        #section1_buttons {
          width: 30%;
          text-align: right;
        }

        #section1_buttons button {
          width:100%;
          max-width: 250px;
          background: transparent;
          border: 1px solid #787878;
          font-family: 'Helvetica Neue', sans-serif;
          color: #2C3137;
          height: 50px;
          font-size: 1.2em;
          font-weight: 400;
          margin-bottom: 25px;
          transition: all 0.3s;
        }

        #section1_buttons button:hover {
          background:#a6b5b6;
          cursor: pointer;
        }

        #hero-player-slideshow {
          display: none;
        }

        @media screen and (max-width: 768px) {
          #hero-player {
            padding: 0;
          }
          #section1 {
            padding-top: 50px;
            padding-left: 20px;
            padding-right: 20px;
            text-align: center;
          }

          #hero-player p {
            text-align: center;
            font-size: small;
          }

          #section1 {
            flex-direction: column;
            padding-bottom: 40px;
          }

          #section1 h1 {
            font-size: 1.4em;
          }

          #section1 li {
            font-size: 1.2em;
          }

          #section1_copy {
            width: 100%;
            padding-right: 0;
          }

          #section1_buttons {
            width: 100%;
            text-align: center;
            padding: 50px 20px 0 20px;
          }

          #section1_buttons button {
            width: 100%;
          }
          
        }

        /* The dots/bullets/indicators */
        .dot {
          cursor: pointer;
          height: 15px;
          width: 15px;
          margin: 0 5px;
          background-color: #2C3137;
          border-radius: 50%;
          display: inline-block;
          transition: background-color 0.3s ease;
        }

        .active, .dot:hover {
          background-color: #717171;
        }

        .selected {
          border: 2px solid #2C3137;
          background-color: transparent;
        }

        .selected:hover {
          background-color: transparent;
        }

        .slideshow {
          touch-action: pan-y; /* Allows vertical scrolling but prevents horizontal */
        }

        .slideshow-nav-container {
          display: flex;
          justify-content: space-between;
        }

        @media screen and (max-width: 768px) {
          .slideshow-nav-container {
            display: block;
          }
          
        }
      </style>

  </head>
  <body>
    <div class="container">
      <header>
          <a href="index.html"><img src="img/CGSB.svg" class="logo" ></a>
          
          <div class="mobile-menu" id="mobileMenu">
            <!--<button class="close-mobile-menu" onclick="toggleMenu()">&nbsp;</button>-->
            <ul class="nav">
              <li><a href="index.html">Home</a></li>
              <li><a href="work.html">Work</a></li>
              <li><a href="about.html">About</a></li>
              <li><a href="contact.html">Contact</a></li>
            </ul>
          </div>
          <div class="burger" onclick="toggleMenu()">&nbsp;</div>
          
          <nav>
              <ul>
                  <li><a href="work.html">Work</a></li>
                  <li><a href="about.html">About</a></li>
                  <li><a href="contact.html">Contact</a></li>
              </ul>
          </nav>
      </header>
      
      <main>
        <section id="hero-player">
          <div class="slideshow" id="hero-player-slideshow" onclick=" location.href='work/nike404.html'">
            <img src="img/cover/swoosh.jpg" class="full-width-image slide active" alt="Nike .SWOOSH '404 Error' Campaign" data-client="Nike" data-name=".SWOOSH '404 Error' Campaign" data-link="work/nike404.html">
            <img src="img/cover/casetify.jpg" class="full-width-image slide" alt="Casetify 'Bounce' Campaign" data-client="Casetify" data-name="Bounce" data-link="work/casetify.html">
            <img src="img/cover/coach.jpg" class="full-width-image slide" alt="Coach Wear Your Shine" data-client="Coach" data-name="Wear Your Shine" data-link="work/coach.html">
            <img src="img/cover/kai_2.jpg" class="full-width-image slide" alt="Nike .SWOOSH Air Max 1 'Low Poly'" data-client="Nike" data-name=".SWOOSH Air Max 1 'Low Poly'" data-link="work/nike404lowpoly.html">
            <img src="img/cover/hs.jpg" class="full-width-image slide" alt="Head & Shoulders Take It Up To 100" data-client="Head & Shoulders" data-name="Take It Up To 100" data-link="work/headshoulders.html">
            
          </div>
          <div class="slideshow-nav-container">
            <div style="text-align:left;padding-top: 12px;" class="slideshow-nav desktop_only" id="hero-player-slideshow-nav">
              <span class="dot selected" onclick="clickSlide(0)"></span>
              <span class="dot" onclick="clickSlide(1)"></span>
              <span class="dot" onclick="clickSlide(2)"></span>
              <span class="dot" onclick="clickSlide(3)"></span>
              <span class="dot" onclick="clickSlide(4)"></span>
            </div>
            <p>
              <a id="__hero_link" href="work/nike404.html">
                <span>Nike <span class="text-decoration: italic">.SWOOSH "404 Error" Campaign</span></span>
              </a>
            </p>
          </div>
        </section>

        <section id="section1">
          <div id="section1_copy">
            <h1 style="margin-bottom: 0px;margin-top:-8px">
              CGSB is a full-service creative studio, specializing in 3D, animation, narrative and sound to help emerging and established brands cut through the noise & slop, launch products faster, and scale their content pipelines smarterâ€”all without the usual cost or complexity. 
            </h1>
          </div>

          <div id="section1_buttons">
              <button onclick="location.href='work.html'">Work</button><br/>
              <button onclick="location.href='about.html'">About</button><br/>
              <button onclick="location.href='contact.html'">Contact</button><br/>
          </div>

        </section>

      </main>
    </div>
    <footer>
        <div class="footer_desktop">
            <p>&copy;&nbsp;<script>document.write(new Date().getFullYear());</script>&nbsp;Computer Generated Services Bureau</p>
        </div>
        <div class="footer_mobile">
            <p>&copy;&nbsp;<script>document.write(new Date().getFullYear());</script>&nbsp;CGSB</p>
        </div>
        <ul>
          <li>
            <a href="https://www.instagram.com/cgsbstudio/" target="_blank" rel="noopener noreferrer">
              <img src="img/socials/instagram_100.png" alt="CGSB on Instagram" width="20">
            </a>
          </li>
          <li>
            <a href="https://linkedin.com/company/cgsbstudio" target="_blank" rel="noopener noreferrer">
              <img src="img/socials/linkedin_100.png" alt="CGSB on LinkedIn" width="20">
            </a>
          </li>
        </ul>
    </footer>

    <script src="js/mobile-menu.js"></script>
    <!--<script src="js/slideshow.js"></script>-->
    <script type="text/javascript">
      /*  The following is very close to working; bug is that it only drags one time on mobile. */

      let currentSlide = 0;
      let slides = [];
      let dots = [];
      let autoPlayInterval;
      let autoPlayStopped = false; // Flag to permanently stop autoplay

      // Variables for touch events
      let touchStartX = 0;
      let touchCurrentX = 0;
      let isDragging = false;

      // Utility to get the width of a slide
      function getSlideWidth() {
        return document.querySelector('.slideshow').clientWidth;
      }

      function updateHeroLink(index) {
        const heroLink = document.getElementById('__hero_link');
        heroLink.href = slides[index].getAttribute('data-link');
        
        let linkText = slides[index].getAttribute('data-client') + ' - ' + slides[index].getAttribute('data-name');
        heroLink.innerHTML = linkText;
      }

      function updateActiveClasses(index) {
        dots[currentSlide]?.classList.remove('selected');
        dots[index]?.classList.add('selected');
      }

      function showSlides(index) {
        const slideshowContainer = document.querySelector('.slides-container');
        slideshowContainer.style.transition = "transform .7s ease-in-out";
        slideshowContainer.style.transform = `translateX(-${index * 100}%)`;

        updateActiveClasses(index);
        updateHeroLink(index);
        currentSlide = index;

        // Update slide click action
        document.getElementById('hero-player-slideshow').onclick = () => {
          window.location.href = slides[index].getAttribute('data-link');
        };
      }

      function swipeSlides(index) {
        const slideshowContainer = document.querySelector('.slides-container');
        slideshowContainer.style.transition = "transform .25s ease-in-out";
        slideshowContainer.style.transform = `translateX(-${index * 100}%)`;

        updateActiveClasses(index);
        updateHeroLink(index);
        currentSlide = index;

        // Update slide click action
        document.getElementById('hero-player-slideshow').onclick = () => {
          window.location.href = slides[index].getAttribute('data-link');
        };
      }

      function resetSlidePosition() {
        const slideshowContainer = document.querySelector('.slides-container');
        slideshowContainer.style.transition = "transform 0.7s ease-in-out";
        slideshowContainer.style.transform = `translateX(-${currentSlide * 100}%)`;
      }

      function startAutoPlay() {
        if (autoPlayStopped) return; // Prevent autoplay if stopped
        autoPlayInterval = setInterval(nextSlide, 5000); // Advance slides every 5 seconds
      }

      function resetAutoPlay() {
        if (autoPlayStopped) return; // Do not restart autoplay if permanently stopped
        clearInterval(autoPlayInterval); // Clear the current interval
        startAutoPlay(); // Restart the autoplay interval
      }

      function stopAutoPlay() {
        clearInterval(autoPlayInterval);
        autoPlayStopped = true; // Permanently stop autoplay
      }

      function startDrag(event) {
        // event.preventDefault(); // Prevent scrolling during drag
        touchStartX = event.touches[0].clientX;
        touchCurrentX = touchStartX;
        isDragging = true;

        // Remove transition to allow smooth dragging
        const slideshowContainer = document.querySelector('.slides-container');
        slideshowContainer.style.transition = "none";

        stopAutoPlay(); // Stop autoplay permanently after user interaction
      }

      // let throttleTimeout = null;
      function duringDrag(event) {

        if (!isDragging) return;

        touchCurrentX = event.touches[0].clientX;
        const slideWidth = getSlideWidth();
        const offset = (touchCurrentX - touchStartX) / slideWidth * 100;

        const slideshowContainer = document.querySelector('.slides-container');
        slideshowContainer.style.transform = `translateX(calc(-${currentSlide * 100}% + ${offset}%))`;
        /*if (!throttleTimeout) {
          throttleTimeout = setTimeout(() => {
            throttleTimeout = null;
          }, 50); // Throttle interval in milliseconds
        }*/
      }

      function endDrag() {
        if (!isDragging) return;

        const slideWidth = getSlideWidth();
        const swipeDistance = touchCurrentX - touchStartX;

        isDragging = false;

        if (Math.abs(swipeDistance) > slideWidth / 10) {
          // Determine direction
          if (swipeDistance < 0 && currentSlide < slides.length - 1) {
            swipeSlides(currentSlide + 1);
          } else if (swipeDistance > 0 && currentSlide > 0) {
            swipeSlides(currentSlide - 1);
          } else {
            resetSlidePosition();
          }
        } else {
          resetSlidePosition();
        }

        // Reset touch variables
        touchStartX = 0;
        touchCurrentX = 0;
      }

      function clickSlide(index) {
        stopAutoPlay(); // Stop autoplay permanently when a dot is clicked
        showSlides(index);
      }

      function nextSlide() {
        const nextIndex = (currentSlide + 1) % slides.length;
        showSlides(nextIndex);
      }

      document.getElementById('hero-player-slideshow').style.display = 'block';
      slides = document.querySelectorAll('.slide');
      dots = document.querySelectorAll('.dot');
      

      if (slides.length && dots.length) {
        const slideshowContainer = document.getElementById('hero-player-slideshow');
        slideshowContainer.innerHTML = `<div class="slides-container">${slideshowContainer.innerHTML}</div>`;
        showSlides(0);

        //const slidesContainer = document.querySelector('.slides-container');
        slideshowContainer.addEventListener('touchstart', startDrag);
        slideshowContainer.addEventListener('touchmove', duringDrag);
        slideshowContainer.addEventListener('touchend', endDrag);

        dots.forEach((dot, index) => {
          dot.addEventListener('click', () => clickSlide(index));
        });

        startAutoPlay();
      }
    </script>
  </body>
</html>